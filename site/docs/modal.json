c({"name": "modal", "type": "page", "comment": "<h1>can.ui.Modal</h1>\n\n<p>can.ui comes with the modal widget. It is a low level widget that allows you \nto easily build your modal widgets. can.ui.Modal takes care of all plumbing involved\nin creation and using of widgets. Some of the things can.ui.Modal will take care of:</p>\n\n<ol>\n<li><p>Modal positioning. can.ui.Modal uses can.ui.Positionable which allows you to use\nsimple syntax to position your modal.</p></li>\n<li><p>Modal stacking. can.ui.Modal keeps stack of all open modals to make sure they are\nalways shown in proper order. If closeOnEscape option is set to true can.ui.Modal will\nmake sure only the modal that is currently on top is closed.</p></li>\n<li><p>Modal reordering. You can use moveToTop method to put the modal on top.</p></li>\n<li><p>Overlays. can.ui.Modal allows you to pass either true or jQuery object as an overlay.\nIt will take care of correct z-index, dimensions and positioning.</p></li>\n<li><p>Showing modals inside elements. can.ui.Modal can be shown inside an element and everything\nwill just work, including positioning, overlay dimensions, etc.</p></li>\n<li><p>Easy customization. can.ui.Modal allows you to customize show and hide methods on the controller\nor on the instance level. This makes it easy to create custom modal controllers that can be \ncustomized on per instance basis.</p></li>\n</ol>\n\n<h2>Example - Implementing Twitter Bottstrap style modal</h2>\n\n<p><a href=\"http://twitter.github.com/bootstrap/javascript.html#modals\">Twitter Bootstrap</a> has a nice modal implementation.\nIn this example we will recreate it's basic behavior:</p>\n\n<ol>\n<li>Modal window should slide from the top of the page.</li>\n<li>Overlay element should fade in.</li>\n<li>Closing overlay should slide modal out of page and fade out the overlay.</li>\n</ol>\n\n<p>We can implement that kind of behavior by passing custom hide and show functions when we create the modal</p>\n\n<pre><code>new can.ui.Modal($(elem), {\n    show : function(el, position, overlay, cb){\n        var height = el.height();\n        var hiddenPosition = $.extend({}, position, {top: \"-\" + height + \"px\"})\n        overlay.css('opacity', 0).show().animate({opacity: 1}, 100);\n        el.show().css(hiddenPosition).animate(position, 100, cb);\n    },\n    hide : function(el, overlay, cb){\n        var height = el.height();\n        el.animate({top: \"-\" + height + \"px\"}, 100, cb)\n        overlay.animate({opacity: 0}, 100)\n    }\n}, {})\n</code></pre>\n\n<p>Although this will work, we have to pass these functions every time we create a modal window. It would be great\n if we could just create our custom modal controller and simply pass the default functions. We can do that too:</p>\n\n<pre><code>var bootstrapModal = can.ui.Modal({\n    show : function(el, position, overlay, cb){\n        var height = el.height();\n        var hiddenPosition = $.extend({}, position, {top: \"-\" + height + \"px\"})\n        overlay.css('opacity', 0).show().animate({opacity: 1}, 100);\n        el.show().css(hiddenPosition).animate(position, 100, cb);\n    },\n    hide : function(el, overlay, cb){\n        var height = el.height();\n        el.animate({top: \"-\" + height + \"px\"}, 100, cb)\n        overlay.animate({opacity: 0}, 100)\n    }\n}, {})\n</code></pre>\n\n<p>This implementation will allow us to create our custom modal by calling:</p>\n\n<pre><code>new bootstrapModal(element);\n</code></pre>\n\n<p>If we want to customize show or hide behavior, we can still pass show or hide method when creating the modal:</p>\n\n<pre><code>new bootstrapModal($(elem), {\n    show : function(el, position, overlay, cb){\n        // custom show code\n    }\n}, {})\n</code></pre>\n\n<p>In just a few lines of code we've implemented the modal widget that behaves similary to the Twitter bootstrap's\nmodal widget, while using all of the low level plumbing from the can.ui.Modal.</p>\n\n<h2>Example - Pausable events and modal</h2>\n\n<p>Modal widget is implemented in a way that allows you to easily take control over hiding / closing. Imagine if \nuser was presented with some form inside the modal. We want to make sure that he won't accidentaly close the \nform if he put some content in there. Let's see how we can implement it. </p>\n\n<p>This is the HTML structure for the form:</p>\n\n<pre><code>&lt;div id=\"signup-form\" class=\"modal\"&gt;\n    &lt;form&gt;\n        &lt;div&gt;&lt;label&gt;Username&lt;/label&gt;&lt;input name=\"username\" /&gt;&lt;/div&gt;\n        &lt;div&gt;&lt;label&gt;Password&lt;/label&gt;&lt;input name=\"password\" type=\"password\" /&gt;&lt;/div&gt;\n        &lt;div&gt;&lt;input type=\"submit\" value=\"Save!\" /&gt;&lt;/div&gt;\n    &lt;/form&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>Our modal widget is implemented like this:</p>\n\n<pre><code>var formModal = can.ui.Modal({}, {\n    \"input keydown\" : \"markDirty\",\n    \"input change\"  : \"markDirty\",\n    markDirty : function(){\n        this.element.addClass('dirty')\n    },\n    \" hide\" : function(el, ev){\n        if(this.element.hasClass('dirty')){\n            ev.pause();\n            new confirmModal($('&lt;div/&gt;'), {\n                confirm : function(){\n                    ev.resume();\n                },\n                of : this.element\n            })\n        }\n    }\n})\n</code></pre>\n\n<p>As you can see it will mark the element as dirty if someone enters something in the form. If <code>hide</code> event is triggered\non the modal (by pressing the escape key for instance) that event is going to be paused and another modal will show up\nwith the confirmation. Confirm modal is implemented like this:</p>\n\n<pre><code>var confirmModal = can.ui.Modal({\n    defaults : {\n        confirm       : function(){},\n        destroyOnHide : true\n    }\n}, {\n    init : function(){\n        this.element.html('Are you sure? &lt;a href=\"javascript://\"\" class=\"confirm\"&gt;YES!&lt;/a&gt;').addClass('modal');\n        this._super.apply(this, arguments)\n    },\n    \".confirm click\" : function(){\n        this.options.confirm();\n        this.element.remove();\n    }\n})\n</code></pre>\n\n<p>Confirm modal will call whatever is passed as the <code>confirm</code> option when user clicks on the \"YES!\" link. In our case we \npassed it a function that will resume the event. </p>\n\n<p>This was an example that showed you how to take control over the behavior of your modals. can.ui.Modal is a great low\nlevel modal widget that is extremely easy to customize and extend.</p>", "src": "canui/incubator/modal/modal.md", "children": []})